
はい、backfill 対応まで入れた「完全版」はすでに 2 本に分けてありますので、両方お渡しします。

---

## 1️⃣ メイン本体（通常実行＋ EQ_RUN_TS 対応）

**`ww_ticker_dashboard_16d_eqrun_env.py`**
→ ふだん 1 回分の相場チェックに使う統合ダッシュボード本体です。

* stress_v ランキング
* market_regime とのマージ
* 00/01/02 の market CSV
* `00_market_stress_v_rank.png`
* `history/market_regime_history_long.csv`
* `history/market_summary_history.csv`
* `history/01_market_summary_30runs.png`
* 環境変数 `EQ_RUN_TS="yyMMdd_HHmm"` を指定すると、その ts で出力

ダウンロードはこちらです：

**[Download: ww_ticker_dashboard_16d_eqrun_env.py](sandbox:/mnt/data/ww_ticker_dashboard_16d_eqrun_env.py)**

---

## 2️⃣ backfill 専用ドライバ（過去日をまとめて実行）

**`ww_eq_dashboard_backfill_v01.py`**
→ 上の 16d を「過去日付に対して繰り返し実行」して、
`history/market_summary_history.csv` などを一気に埋めるためのスクリプトです。

* 使い方イメージ：

```bash
python ww_eq_dashboard_backfill_v01.py \
    --start 2024-10-01 \
    --end   2024-11-23 \
    --config config_eq_dashboard.json \
    --time 16:00
```

* やっていること：

  * 日付を 1 日ずつループ
  * `EQ_RUN_TS=yyMMdd_HHMM` を環境変数にセットして
  * `ww_ticker_dashboard_16d_eqrun_env.py` を呼び出し
  * 各日について `res_eq_check_all/{ts}_eq_check_all/` と history を更新

ダウンロードはこちらです：

**[Download: ww_eq_dashboard_backfill_v01.py](sandbox:/mnt/data/ww_eq_dashboard_backfill_v01.py)**

---

この 2 本が揃えば、

* ふだんは `ww_ticker_dashboard_16d_eqrun_env.py` を単発で実行
* 過去分をまとめて埋めたいときだけ `ww_eq_dashboard_backfill_v01.py` を使う

という形で、地震計 3 本の履歴を育てていけます。

